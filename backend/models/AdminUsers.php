<?phpnamespace backend\models;use Yii;use yii\web\IdentityInterface;use yii\db\ActiveRecord;/** * This is the model class for table "admin_users". * * @property int $id * @property string $name * @property string $username * @property string $password * @property int $login_key * @property int $status * @property string $permissions */class AdminUsers extends ActiveRecord implements IdentityInterface{    const STATUS_ACTIVE = 1;    const STATUS_DEACTIVE = 0;    /**     * @inheritdoc     */    public static function tableName()    {        return 'admin_users';    }    public function getClassName()    {        $exp = explode('\\',__CLASS__);        return $exp[count($exp)-1];    }    /**     * @inheritdoc     */    public function rules()    {        return [            [['name', 'username', 'password', 'status'], 'required','message'=>'{attribute} xanasını boş buraxmayın'],            ['login_key','integer'],            [['name', 'permissions'], 'string', 'max' => 30],            [['username'], 'string', 'max' => 15],            [['password'], 'string', 'max' => 65],            ['status', 'default', 'value' => self::STATUS_ACTIVE],            ['status', 'in', 'range' => [self::STATUS_ACTIVE, self::STATUS_DEACTIVE]]        ];    }    /**     * @inheritdoc     *    public function fields()    {        $fields = parent::fields();        unset($fields['auth_key'],$fields['password']);        return $fields;    }    */    /**     * @inheritdoc     */    public function attributeLabels()    {        return [            'id' => 'ID',            'name' => 'Ad',            'username' => 'İstifadəçi adı',            'password' => 'Şifrə',            'status' => 'Status',            'permissions' => 'İcazələr',        ];    }    /**     * {@inheritdoc}     */    public static function findIdentity($id)    {        return static::findOne(['id' => $id, 'status' => self::STATUS_ACTIVE]);    }    /**     * {@inheritdoc}     */    public static function findIdentityByAccessToken($token, $type = null)    {        throw new NotSupportedException('"findIdentityByAccessToken" is not implemented.');    }    /**     * Finds user by username     *     * @param string $username     * @return static|null     */    public static function findByUsername($username)    {        return static::findOne(['username' => $username, 'status' => self::STATUS_ACTIVE]);    }    /**     * {@inheritdoc}     */    public function getId()    {        return $this->getPrimaryKey();    }    /**     * {@inheritdoc}     */    public function getAuthKey()    {        return $this->auth_key;    }    /**     * {@inheritdoc}     */    public function validateAuthKey($authKey)    {        return $this->getAuthKey() === $authKey;    }    /**     * Validates password     *     * @param string $password password to validate     * @return bool if password provided is valid for current user     */    public function validatePassword($password)    {        return Yii::$app->security->validatePassword($password, $this->password);    }    /**     * Generates password hash from password and sets it to the model     *     * @param string $password     */    public function setPassword($password)    {        $this->password = Yii::$app->security->generatePasswordHash($password);    }    /**     * Generates "remember me" authentication key     */    public function generateAuthKey()    {        $this->auth_key = Yii::$app->security->generateRandomString();    }}