<?phpuse yii\grid\GridView;use yii\helpers\Html;use yii\helpers\Url;use common\widgets\Alert;use backend\assets\AppAsset;use backend\components\FilterActionColumn;use backend\components\Functions;/* @var $this yii\web\View *//* @var $searchModel backend\models\SiteCommentsSearch *//* @var $dataProvider yii\data\ActiveDataProvider */$this->title = 'Rəylər';$this->params['breadcrumbs'][] = $this->title;?><div class="site-comments-index moduleList">    <h1 class="font-25"><?= Html::encode($this->title) ?></h1>    <?php // echo $this->render('_search', ['model' => $searchModel]); ?>    <div class="alert alert-info alert-dismissible fade in hidden-lg hidden-md hidden-sm" role="alert">        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>        <strong>Qeyd:</strong> Cədvəl tam görünmürsə sağa doğru sürüşdürün və ya telefonunuzun "ekran fırlanması" özəlliyini aktivləşdirin    </div>    <?= Alert::widget(); ?>    <form action="<?php echo Url::toRoute('deletemore'); ?>" method="POST">        <div class="table-responsive">            <?= GridView::widget([                'dataProvider' => $dataProvider,                'filterModel' => $searchModel,                'summary'=> "",                'tableOptions'=>[                    'class'=>'table table-striped table-bordered'                ],                'columns' => [                    [                        'attribute'=>'id',                        'enableSorting' => false,                        'contentOptions'=>['class'=>'w60']                    ],                    [                        'attribute'=>'connect_id',                        'enableSorting' => false,                        'filter' => false,                        'contentOptions'=>['class'=>'w60'],                        'value' => function($data){                            if($data->type==1){                                return \backend\models\SiteDoctors::getDoctors($data->connect_id);                            }elseif($data->type==2){                               $ent =  \backend\models\SiteEnterprises::findOne($data->connect_id);                               return $ent->name;                            }elseif($data->type==3){                                $ent =  \backend\models\SiteNews::findOne($data->connect_id);                                return $ent->headline;                            }                        }                    ],                    [                        'attribute'=>'name',                        'format'=>'raw',                        'value'=>function($data){                            return Html::a($data->name,['update','id'=>$data->id],['class'=>'titleLink','data-toggle'=>'tooltip','data-html'=>'true']);                        }                    ],                    [                        'attribute'=>'datetime',                        'value'=>function($data)                        {                            return Functions::getDatetime($data->datetime,['type'=>'date']);                        }                    ],                    [                        'attribute'=>'positive',                        'filter'=>Yii::$app->params['filter.global.confirm'],                        'format'=>'raw',                        'value'=>function($data){                            if($data->positive == 0){                                $str = '<div class="tableBtn btn btn-info btn-xs">Gözləmədə</div>';                            }elseif($data->positive == 2){                                $str = '<div class="tableBtn btn btn-danger btn-xs">Mənfi</div>';                            }elseif ($data->positive == 1){                                $str = '<div class="tableBtn btn btn-primary btn-xs">Müsbet</div>';                            }                            return $str;                        },                        'contentOptions'=>['class'=>'w80']                    ],                    [                        'attribute'=>'type',                        'filter'=>Yii::$app->params['filter.global.confirm'],                        'format'=>'raw',                        'value'=>function($data){                            return \backend\models\SiteComments::getType()[$data->type];                        },                        'contentOptions'=>['class'=>'w80']                    ],                    [                        'attribute'=>'status',                        'filter'=>Yii::$app->params['filter.global.confirm'],                        'format'=>'raw',                        'value'=>function($data){                            return $data->status == 1 ? '<div class="tableBtn btn btn-primary btn-xs">Aktiv</div>': '<div class="tableBtn btn btn-danger btn-xs">Passiv</div>';                        },                        'contentOptions'=>['class'=>'w80']                    ],                    [                        'class' => FilterActionColumn::className(),                        'template' => '{update} {delete} {del_check}',                        'filterContent' => Html::submitButton('Toplu sil',['class'=>'btn btn-danger button-delete-all','data-confirm'=>'Bu məlumatı silmək istədiyinizdən əminsinizmi?','data-method'=>'POST']),                        'header' => 'Əməliyyatlar',                        'buttons' => [                            'update' => function($url, $model){                                return Html::a('<span class="glyphicon glyphicon-pencil"></span>',['update','id'=>$model->id],['class'=>'btn button-update']);                            },                            'delete' => function($url, $model){                                return Html::a('<span class="glyphicon glyphicon-trash"></span>', ['delete', 'id' => $model->id],[                                    'class'=>'btn button-delete',                                    'data' => [                                        'confirm' => 'Bu məlumatı silmək istədiyinizdən əminsinizmi?',                                        'method' => 'post',                                    ]                                ]);                            },                            'del_check' => function ($url, $model, $key) {                                return  "<div class=\"del_check\"><input type=\"checkbox\"  class=\"flat\" name=\"del_check[]\" value=\"{$model->id}\"></div>";                            }                        ],                        'contentOptions'=>['class'=>'ActionControl']                    ],                ],            ]);            $urlStatusAction = Url::to(['status']);            $this->registerJs("                    $(function(){                        $(\".status\").on('change',function(){                            var dataID = $(this).attr(\"data-id\");                            $.post(                            \"$urlStatusAction\",                            { id : dataID },                            function(data){                                return true;                            });                        });                    });                ");            ?>        </div>        <input type="hidden" name="<?=Yii::$app->request->csrfParam?>" value="<?=Yii::$app->request->getCsrfToken(); ?>" />    </form></div>