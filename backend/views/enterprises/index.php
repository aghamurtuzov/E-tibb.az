<?phpuse yii\grid\GridView;use yii\helpers\Html;use yii\helpers\Url;use yii\helpers\ArrayHelper;use common\widgets\Alert;use backend\assets\AppAsset;use backend\components\FilterActionColumn;use backend\components\Functions;use backend\models\SiteMenus;/* @var $this yii\web\View *//* @var $searchModel backend\models\SiteEnterprisesSearch *//* @var $dataProvider yii\data\ActiveDataProvider */$this->title = 'Obyektlər';$this->params['breadcrumbs'][] = $this->title;?><div class="site-enterprises-index moduleList">    <h1 class="font-25"><?= Html::encode($this->title) ?></h1>    <?php // echo $this->render('_search', ['model' => $searchModel]); ?>        <div class="alert alert-info alert-dismissible fade in hidden-lg hidden-md hidden-sm" role="alert">        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>        <strong>Qeyd:</strong> Cədvəl tam görünmürsə sağa doğru sürüşdürün və ya telefonunuzun "ekran fırlanması" özəlliyini aktivləşdirin    </div>    <?= Alert::widget(); ?>    <form action="<?php echo Url::toRoute('deletemore'); ?>" method="POST">        <div class="table-responsive">        <?PHP        $menus = SiteMenus::find()->where(['type'=>2])->orderBy('name')->all();        if(!empty($menus))        {            foreach($menus as $key => $val){ $menus[$val['id']] = $val; }        }        $photoPath = Functions::getUploadUrl().$customPath.'/small/';        ?>        <?= GridView::widget([            'dataProvider' => $dataProvider,            'filterModel' => $searchModel,            'summary'=> "",            'tableOptions'=>[                'class'=>'table table-striped table-bordered'            ],            'rowOptions'=>function($model){                if($model->expires < Yii::$app->params['current.date']){                    return ['class' => 'danger'];                }            },            'columns' => [                [                    'attribute'=>'id',                    'enableSorting' => false,                    'contentOptions'=>['class'=>'w60']                ],                [                    'attribute'=>'name',                    'format'=>'raw',                    'value'=>function($data) use ($photoPath) {                        return Html::a($data->name,['view','id'=>$data->id],['class'=>'titleLink','title'=>'<img width="100" height="100" class="tooltip_image" src="'.$photoPath.$data->photo.'">','data-toggle'=>'tooltip','data-html'=>'true']);                    }                ],                [                    'attribute'=>'expires',                    'value'=>function($data)                    {                        $date = explode('-',$data->expires);                        return $date[2].'-'.$date[1].'-'.$date[0];                    }                ],                [                    'attribute'=>'category_id',                    'filter'=>ArrayHelper::map($menus,'id','name'),                    'value'=>function($data) use ($menus)                    {                        return isset($menus[$data->category_id]) ? $menus[$data->category_id]['name'] : '';                    }                ],                [                    'class' => FilterActionColumn::className(),                    'template' => '{update} {delete} {del_check}',                    'filterContent' => Html::submitButton('Toplu sil',['class'=>'btn btn-danger button-delete-all','data-confirm'=>'Bu məlumatı silmək istədiyinizdən əminsinizmi?','data-method'=>'POST']),                    'header' => 'Əməliyyatlar',                    'buttons' => [                        'update' => function($url, $model){                            return Html::a('<span class="glyphicon glyphicon-pencil"></span>',['update','id'=>$model->id],['class'=>'btn button-update']);                        },                        'delete' => function($url, $model){                            return Html::a('<span class="glyphicon glyphicon-trash"></span>', ['delete', 'id' => $model->id],[                                'class'=>'btn button-delete',                                'data' => [                                    'confirm' => 'Bu məlumatı silmək istədiyinizdən əminsinizmi?',                                    'method' => 'post',                                ]                            ]);                        },                        'del_check' => function ($url, $model, $key) {                            return  "<div class=\"del_check\"><input type=\"checkbox\"  class=\"flat\" name=\"del_check[]\" value=\"{$model->id}\"></div>";                        }                    ],                    'contentOptions'=>['class'=>'ActionControl']                ],            ],        ]);        ?>        </div>        <input type="hidden" name="<?=Yii::$app->request->csrfParam?>" value="<?=Yii::$app->request->getCsrfToken(); ?>" />    </form></div>